import { multiply } from "https://cdn.jsdelivr.net/npm/mathjs@11/+esm";
const stochasticMatrix = [[0.01177,0.0081,0.00838,0.00482,0.005,0.00158,0.00504,0.00518,0.00846,0.00874,0.01198,0.01239,0.01216,0.0128,0.01253,0.0133,0.00952,0.01188,0.00796,0.01181,0.00776,0.01311,0.01423,0.01954,0.01907,0.02761,0.02565,0.03057,0.02529,0.08403,0.07551,0.13257,0.12428,0.18308,0.12106,0.12422,0.06734,0.06703,0.01178,0.01148,0.00174,0.00174,0.00174],[0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0],[0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00015,0.00015,0.00038,0.00034,0.00068,0.00056,0.00101,0.00079,0.00135,0.00101,0.00296,0.00251,0.00578,0.00521,0.00971,0.00776,0.01215,0.00889,0.01317,0.00866,0.01283,0.00844,0.05979,0.05551,0.10547,0.10131,0.14992,0.09857,0.09857,0.04861,0.04861,0.0,0.0,0.0],[0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.0,0.0,0.0],[0.06626,0.0626,0.00704,0.00347,0.00347,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.0004,0.00078,0.00067,0.00118,0.00095,0.00158,0.00123,0.00344,0.00297,0.00667,0.00617,0.01128,0.00929,0.01426,0.01085,0.0156,0.01077,0.0153,0.01059,0.06895,0.06436,0.12114,0.12005,0.1753,0.12019,0.11989,0.0,0.0,0.0],[0.12354,0.06301,0.06297,0.00419,0.00405,0.00092,0.00068,0.00104,0.0007,0.00106,0.00076,0.00451,0.00428,0.00813,0.00803,0.01193,0.00858,0.0091,0.00579,0.00615,0.00289,0.00309,0.00472,0.00478,0.00802,0.01468,0.01945,0.02432,0.02906,0.03214,0.03001,0.02465,0.02257,0.01726,0.06929,0.06412,0.12487,0.11985,0.17895,0.1201,0.00174,0.00174,0.00174],[0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.0,0.0,0.0],[0.07496,0.04929,0.04929,0.02431,0.02431,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2e-05,2e-05,8e-05,8e-05,0.00019,0.00017,0.00034,0.00028,0.00051,0.00039,0.00068,0.00051,0.00148,0.00126,0.00289,0.00261,0.00486,0.00388,0.00608,0.00444,0.00658,0.00433,0.00641,0.00422,0.02989,0.02776,0.05274,0.05066,0.0,0.0,0.0],[0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.0,0.0,0.0],[0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.00174,0.0,0.0],[0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.0,0.00174,0.83333],[0.07922,0.0709,0.12796,0.11996,0.17538,0.11355,0.11331,0.05654,0.05621,0.00099,0.00066,0.00437,0.00404,0.00775,0.00743,0.01113,0.00748,0.0078,0.00425,0.00455,0.00114,0.00138,0.00149,0.00163,0.00197,0.00535,0.00592,0.00907,0.01132,0.01415,0.01452,0.01366,0.01554,0.01301,0.01485,0.01083,0.01937,0.01396,0.02227,0.01709,0.00174,0.00174,0.00347],[0.02035,0.07537,0.07049,0.12402,0.11927,0.17137,0.11268,0.1127,0.0556,0.05563,6e-05,0.0001,8e-05,0.00021,0.00019,0.00042,0.0004,0.00076,0.00065,0.00108,0.00088,0.00143,0.0011,0.00176,0.00146,0.00561,0.00528,0.00945,0.00909,0.01465,0.01078,0.01428,0.01037,0.01519,0.00979,0.01449,0.01443,0.01901,0.01744,0.0219,0.02951,0.02778,0.02778],[0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.0,0.0,0.0],[0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.02778,0.02778,0.02778],[0.02575,0.01694,0.0217,0.01312,0.0718,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,1e-05,1e-05,3e-05,2e-05,5e-05,4e-05,0.00012,0.0001,0.00027,0.00024,0.00064,0.00057,0.00118,0.00102,0.00185,0.00145,0.00241,0.00179,0.00433,0.00349,0.00752,0.00656,0.01537,0.01284,0.02142,0.0174,0.0,0.0,0.0],[0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.02778,0.02778,0.02778],[0.01215,0.00889,0.01317,0.00866,0.01283,0.00844,0.05979,0.05551,0.10547,0.10131,0.14992,0.09857,0.09857,0.04861,0.04861,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00015,0.00015,0.00038,0.00034,0.00068,0.00056,0.00101,0.00079,0.00135,0.00101,0.00296,0.00251,0.00578,0.00521,0.00971,0.00776,0.0,0.0,0.0],[0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.02778,0.02778,0.02778],[0.01128,0.00929,0.01426,0.01085,0.0156,0.01077,0.0153,0.01059,0.06895,0.06436,0.12114,0.12005,0.1753,0.12019,0.11989,0.06626,0.0626,0.00704,0.00347,0.00347,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.0004,0.00078,0.00067,0.00118,0.00095,0.00158,0.00123,0.00344,0.00297,0.00667,0.00617,0.0,0.0,0.0],[0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.02778,0.02778,0.02778],[0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0,0.0,0.0],[0.00126,0.00289,0.00261,0.00486,0.00388,0.00608,0.00444,0.00658,0.00433,0.00641,0.00422,0.02989,0.02776,0.05274,0.05066,0.07496,0.04929,0.04929,0.02431,0.02431,0.0,0.0,0.0,0.0,0.0,0.0,0.0,2e-05,2e-05,8e-05,8e-05,0.00019,0.00017,0.00034,0.00028,0.00051,0.00039,0.00068,0.00051,0.00148,0.01215,0.01215,0.01215],[0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.0,0.0,0.0],[0.01205,0.01084,0.01029,0.01078,0.01,0.012,0.00953,0.01488,0.01082,0.01603,0.01056,0.01903,0.01369,0.07608,0.07087,0.13167,0.12322,0.1791,0.11673,0.11703,0.05626,0.05655,0.00072,0.00099,0.00081,0.00445,0.00438,0.00791,0.00793,0.01132,0.00796,0.00787,0.00461,0.00457,0.00134,0.00145,0.00497,0.00522,0.00851,0.00899,0.00174,0.00174,0.00174],[0.00172,0.00157,0.00376,0.00357,0.00716,0.00683,0.01174,0.00981,0.01451,0.01108,0.01565,0.01417,0.01863,0.01718,0.07557,0.07415,0.12758,0.12282,0.17481,0.11613,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,1e-05,5e-05,7e-05,0.0002,0.00022,0.00047,0.00046,0.00083,0.00074,0.00123,0.00111,0.00174,0.00174,0.00174],[0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0,0.0,0.0],[0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.0,0.0,0.0],[0.00082,0.00157,0.00127,0.00224,0.00171,0.00425,0.00351,0.00754,0.00658,0.01202,0.00948,0.01816,0.01412,0.02258,0.01714,0.02537,0.01669,0.07537,0.06692,0.12401,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,1e-05,1e-05,3e-05,2e-05,9e-05,8e-05,0.00024,0.00023,0.00053,0.00046,0.00098,0.0,0.00174,0.00174],[0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.0,0.0,0.0],[0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.0,0.0,0.0],[0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,4e-05,0.00017,0.0,0.0,0.0],[0.00015,0.00015,0.00038,0.00035,0.00069,0.00059,0.00104,0.00084,0.00139,0.00109,0.00302,0.00261,0.00585,0.00543,0.00989,0.00818,0.01253,0.00958,0.01372,0.00953,0.01346,0.00938,0.06041,0.05643,0.10608,0.10558,0.15389,0.10611,0.10581,0.05932,0.05565,0.00704,0.00347,0.00347,0.0,0.0,0.0,0.0,4e-05,4e-05,0.0,0.0,0.0],[4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,4e-05,0.0,0.0,0.0],[4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[0.0,2e-05,2e-05,8e-05,8e-05,0.00019,0.00017,0.00034,0.00028,0.00051,0.00039,0.00068,0.00051,0.00148,0.00126,0.00289,0.00261,0.00486,0.00388,0.00608,0.00444,0.00658,0.00433,0.00641,0.00422,0.02989,0.02776,0.05274,0.05066,0.07496,0.04929,0.04929,0.02431,0.02431,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[0.0,0.0,0.0,4e-05,4e-05,0.00017,0.00017,0.00043,0.00039,0.00077,0.00064,0.00116,0.0009,0.00154,0.00116,0.00339,0.00287,0.0066,0.00596,0.0111,0.00887,0.01389,0.01016,0.01505,0.0099,0.01466,0.00965,0.06833,0.06344,0.12054,0.11578,0.17134,0.11265,0.11265,0.05556,0.05556,0.0,0.0,0.0,0.0,0.0,0.0,0.0],[0.01089,0.00746,0.00742,0.00418,0.00408,0.00094,0.00083,0.00116,0.00109,0.00137,0.00143,0.00501,0.0052,0.00865,0.00897,0.01229,0.01083,0.01063,0.01068,0.01034,0.01181,0.00987,0.0146,0.01115,0.01586,0.01435,0.01904,0.01755,0.07626,0.07472,0.12846,0.12349,0.17578,0.11679,0.11361,0.05623,0.05988,0.00406,0.00761,0.00745,0.00174,0.00174,0.00174],[0.01678,0.0135,0.01366,0.01061,0.01053,0.00771,0.01079,0.01303,0.01579,0.01954,0.02218,0.02735,0.02502,0.03016,0.02642,0.03143,0.0229,0.02778,0.01936,0.07817,0.06988,0.12718,0.12577,0.18162,0.1262,0.12985,0.07593,0.0761,0.02027,0.02033,0.0167,0.01666,0.01313,0.01638,0.01303,0.01624,0.01645,0.01628,0.01658,0.01654,0.00174,0.00174,0.00174],[0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.83333,0.0,0.0],[0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.83333,0.0]];
const steadyVector = [0.18507,0.12407,0.11453,0.12699,0.13827,0.16617,0.13459,0.05897,0.1377,0.13657,0.26726,0.16006,0.1623,0.13522,0.15001,0.15415,0.16323,0.1396,0.17081,0.17146,0.17036,0.158,0.07322,0.15531,0.18161,0.16523,0.15421,0.15312,0.16117,0.14855,0.0,0.1522,0.15408,0.13547,0.1475,0.13849,0.05915,0.12545,0.13164,0.15294,0.2322,0.1935,0.16125]
let opacities = {'a1':1,'a2':1,'a3':1,'a4':1,'a5':1,'a6':1,'a7':1,'a8':1,'a9':1,'a10':1,'a11':1,'a12':1,'a13':1,'a14':1,'a15':1,'a16':1,'a17':1,'a18':1,'a19':1,'a20':1,'a21':1,'a22':1,'a23':1,'a24':1,'a25':1,'a26':1,'a27':1,'a28':1,'a29':1,'a30':1,'a31':1,'a32':1,'a33':1,'a34':1,'a35':1,'a36':1,'a37':1,'a38':1,'a39':1,'a40':1,'a41':1}
let initOpacities = {'a1':1,'a2':1,'a3':1,'a4':1,'a5':1,'a6':1,'a7':1,'a8':1,'a9':1,'a10':1,'a11':1,'a12':1,'a13':1,'a14':1,'a15':1,'a16':1,'a17':1,'a18':1,'a19':1,'a20':1,'a21':1,'a22':1,'a23':1,'a24':1,'a25':1,'a26':1,'a27':1,'a28':1,'a29':1,'a30':1,'a31':1,'a32':1,'a33':1,'a34':1,'a35':1,'a36':1,'a37':1,'a38':1,'a39':1,'a40':1,'a41':1}
let clearOpacities = {'a1':0,'a2':0,'a3':0,'a4':0,'a5':0,'a6':0,'a7':0,'a8':0,'a9':0,'a10':0,'a11':0,'a12':0,'a13':0,'a14':0,'a15':0,'a16':0,'a17':0,'a18':0,'a19':0,'a20':0,'a21':0,'a22':0,'a23': 0,'a24': 0,'a25': 0,'a26': 0,'a27': 0,'a28': 0,'a29': 0,'a30': 0,'a31': 0,'a32': 0,'a33': 0,'a34':0,'a35':0,'a36':0,'a37':0,'a38':0,'a39':0,'a40':0,'a41':0}
let maxElem = Math.max(...steadyVector);
let currentMatrix = stochasticMatrix;

for(let i = 0; i < 43; i++){
    steadyVector[i] = steadyVector[i]/maxElem;
}
const keys = Object.keys(opacities);

function updateBoard(id){
    let loc = keys.indexOf(id);
    let column = getNormalizedColumn(loc);
    for(let i = 0; i < 42; i++){
        opacities[keys[i]] = column[i];
    }
    for(let i = 0; i < 42; i++){
        let image = document.getElementById(keys[i]);
        if (i === 41) {
            image.style.opacity = (opacities[keys[41]]+opacities[keys[42]]).toString();
        }
        else {
            image.style.opacity = opacities[keys[i]].toString();
        }
    }
}

function showSteadyState(){
    for(let i = 0; i < 42; i++){
        let image = document.getElementById(keys[i]);
        if (i === 41) {
            image.style.opacity = (steadyVector[41]+steadyVector[42]).toString();
        }
        else {
            image.style.opacity = steadyVector[i].toString();
        }
    }
}

function getNormalizedColumn(colIndex) {
    let column = currentMatrix.map(row => row[colIndex]);
    let maxElem = Math.max(...column);
    for(let i = 0; i < 41; i++){
        column[i] = column[i]/maxElem;
    }
    return column;
}

function setDepth(){
    let depthText = document.getElementById("depthText");
    let depth = parseInt(depthText.value);
    if(depth == NaN || depth > 20){
        alert("Enter a valid number less than 20");
    }
    else{
        currentMatrix = stochasticMatrix;
        for(let i = 1; i < depth; i++){
            currentMatrix = multiply(currentMatrix, stochasticMatrix);
        }
    }
}

for(let i = 0; i < 41; i++){
    if (i === 30) {
        let el = document.getElementById(keys[i]);
        el.addEventListener("click", (event) => {
            for (let j = 0; j < 42; j++) {
                let image = document.getElementById(keys[j]);
                image.style.opacity = clearOpacities[keys[j]].toString();
            }
        });
    }
    else {
        let el = document.getElementById(keys[i]);
        el.addEventListener("click", (event) => {
            updateBoard(event.target.id);
        });
    }
}

let steadyButton = document.getElementById("ssButtonID");
steadyButton.addEventListener("click", showSteadyState);

let depthButton = document.getElementById("depthSubmit");
depthButton.addEventListener("click", setDepth);

let resetButton = document.getElementById("resetButtonID");
resetButton.addEventListener("click", () => {
    for (let i = 0; i < 42; i++){
        let image = document.getElementById(keys[i]);
        image.style.opacity = initOpacities[keys[i]].toString();
    }
});